# Used for Match Collection QR compression by Match Collection App and QR decompression by Server
# QR is encoded in an Alphanumeric QR


# Contains information about this schema file
schema_file:
  # Version of schema file
  # Incremented every merged schema change
  version: 19


# Names starting with "_" do not correspond to a compressed variable, they are used to aid in (de)compression
# They are also marked using the special type 'meta'
# A type of 'special' is used for complex data structures (such as the timeline) that are not handled like
# other data fields.


# Data that is shared between the objective and subjective QRs. 
generic_data:
  _separator: # Separates key:value pairs
    value: '$'
    type: meta
  _section_separator: # Separates generic from objective/subjective data
    value: '%'
    type: meta
  schema_version:
    value: A
    type: int # Must remain constant between versions
  serial_number:
    value: B
    type: str
  match_number:
    value: C
    type: int
  timestamp:
    value: D
    type: int
  match_collection_version_number:
    value: E
    type: str
  scout_name:
    value: F
    type: str


# Data specific to objective match collection QR
objective_tim:
  _start_character:  # First character in QR used to identify QR type
    value: '+'
    type: meta
  _separator:  # Separates key:value pairs
    value: '$'
    type: meta
  team_number:
    value: Z
    type: int # int properties not needed but int is more intuitive
  scout_id:
    value: X
    type: int # Used to determine which tablets have not submitted
  timeline:
    value: W
    type: special # List of dictionaries


# Timeline is part of objective match collection QR, containing scout input with timestamps
# There are no separators used within the timeline to reduce size. Instead, each entry is a
# fixed length, and each data field within the timeline entry has a fixed position within the
# entry and a fixed length.
# length: How many characters the field is within the QR
# type: decompressed data type
# position: where the field appears with regards to other fields in the timeline
timeline:
  # Encoded in base 10. Always length 3, e.g. '051' for 51 seconds
  time:
    length: 3
    type: int
    position: 0
  # Encoded in alphabet base 26. Always length 2, e.g. 'AJ' for the 10th action
  action_type:
    length: 2
    type: Enum
    position: 1


# Data specific to subjective match collection QR
subjective_aim:
  _start_character:  # First character in QR used to identify QR type
    value: '*'
    type: meta
  _separator:  # Separates each key:value pair
    value: '$'
    type: meta
  _separator_internal:  # Separates each ranking list item
    value: ':'
    type: meta
  rendezvous_agility_rankings:
    value: A
    type: listInt # List of team numbers (ints)
  agility_rankings:
    value: B
    type: listInt # List of team numbers (ints)


# Contains all the enums and their values
# Action type is a alphabet base 26 string representation
action_type:
  score_ball_high: AA
  score_ball_low: AB
  start_incap: AC
  end_incap: AD
  control_panel_rotation: AE
  control_panel_position: AF
  start_climb: AG
  end_climb: AH

